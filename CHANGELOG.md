# Change Log

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

# v1.23.1
## (2024-06-26)

* Refactor secrets and variables to use environments [Kyle Harding]

# v1.23.0
## (2024-06-19)

* Dockerfiles: update balenaCLI version to 18.2.2 [Joseph Kogut]
* Dockerfile_yocto-build-env: bump base image to 22.04 [Joseph Kogut]

# v1.22.4
## (2024-06-14)

* Update job conditions to allow non-PR events for internal branches [Kyle Harding]
* Hardcode environment paths at the job level [Kyle Harding]
* Replace test inputs with a single JSON matrix input [Kyle Harding]

# v1.22.3
## (2024-06-13)

* jenkins_generate_ami: pass yocto scripts version as an env var to helper container [rcooke-warwick]

# v1.22.2
## (2024-06-12)

* Update the triggers on the example test workflow [Kyle Harding]

# v1.22.1
## (2024-06-07)

* Prevent duplicate workflow runs for multiple triggers [Kyle Harding]
* Add catchall job to yocto-build-deploy for merge requirements [Kyle Harding]

# v1.22.0
## (2024-06-06)

* Create workflow to build and deploy balenaOS [Kyle Harding]

# v1.21.10
## (2024-05-02)

* balena-deploy: deploy usbboot if available [Alex Gonzalez]

# v1.21.9
## (2024-04-30)

* balena-lib: improve base tag detection [Alex Gonzalez]

# v1.21.8
## (2024-04-29)

* Support commit tags when extracting version tag from git [Kyle Harding]

# v1.21.7
## (2024-04-19)

* Add missing $select for release_asset.asset_key [Thodoris Greasidis]

# v1.21.6
## (2024-03-25)

* Revert "balena-build: avoid using device-type as a prefix in yocto sstate" [Kyle Harding]

# v1.21.5
## (2024-03-14)

* Merge AMI publishing dependencies into yocto-build-env [Kyle Harding]

# v1.21.4
## (2024-03-13)

* balena-build: avoid using device-type as a prefix in yocto sstate [Kyle Harding]

# v1.21.3
## (2024-02-11)

* Enable S3 Server Side Encryption flags [Kyle Harding]

# v1.21.2
## (2024-02-08)

* automation/include: Pass helper image version [Florin Sarbu]

# v1.21.1
## (2024-02-07)

* balena-deploy: Remove docker.io when pulling image [Alexandru]

# v1.21.0
## (2024-02-02)

* Return image id after pulling helper images [Kyle Harding]
* Build and publish helper images with Flowzone [Kyle Harding]

# v1.20.0
## (2024-02-02)

* Remove unused block-build functions [Kyle Harding]

# v1.19.41
## (2023-12-22)

* automation/balena-deploy: Pin to known working version of balena-img [Alexandru Costache]

# v1.19.40
## (2023-11-13)

* Dockerfiles: update balenaCLI version to 17.2.2 [Alex Gonzalez]
* balena-deploy-block.sh: deploy licenses and changelog as release assets [Alex Gonzalez]
* balena-deploy: Add changelog to deployed artifacts [Alex Gonzalez]
* balena-api: add release assets helper functions [Alex Gonzalez]

# v1.19.39
## (2023-10-20)

* Dockerfile_yocto-build-env: Install rsync and uudecode host dependencies [Alexandru Costache]

# v1.19.38
## (2023-10-11)

* README.md ChangeType is needed for PR so add to README example [Alex J Lennon]

# v1.19.37
## (2023-10-10)

* Dockerfile_yocto-build-env: Add screen [Alex J Lennon]

# v1.19.36
## (2023-10-10)

* flowzone: allow external contributions [Alex Gonzalez]

# v1.19.35
## (2023-09-28)

* balena-deploy: fail if device type not found [rcooke-warwick]
* balena-api: Dont assume private if can't get DT [rcooke-warwick]

# v1.19.34
## (2023-07-12)

* Remove all traces of --skip-discontinued [Florin Sarbu]
* barys: Remove documenting the --skip-discontinued option [Florin Sarbu]

# v1.19.33
## (2023-07-10)

* Update device-types package from v10.3.0 to v10.5.1 [Alex Gonzalez]
* barys: remove option to skip discontinued device types [Alex Gonzalez]
* balena-lib: remove balena_lib_get_dt_state [Alex Gonzalez]
* jenkins_build: remove discontinued device check [Alex Gonzalez]
* balena-deploy: remove discontinued check [Alex Gonzalez]

# v1.19.32
## (2023-06-19)

* balena-deploy: Newer meta-balena do not create a kernel_source tarball [Alex Gonzalez]

# v1.19.31
## (2023-06-05)

* balena-deploy: add a compressed licenses tarball to the deploy artifacts [Alex Gonzalez]

# v1.19.30
## (2023-05-23)

* generate_ami: opt-in secure boot when using signed images [Alex Gonzalez]
* balena-generate-ami: comply with default AMI quotas [Alex Gonzalez]

# v1.19.29
## (2023-05-19)

* balena-deploy: add secureBoot feature into contract [Alex Gonzalez]

# v1.19.28
## (2023-05-06)

* jenkins_build: accept bitbake extra arguments [Alex Gonzalez]

# v1.19.27
## (2023-04-21)

* barys: fix removal of equals sign from argval [Joseph Kogut]

# v1.19.26
## (2023-04-12)

* balena-lib: Do not return error if no balena user token is available [Alex Gonzalez]

# v1.19.25
## (2023-03-01)

* Dockerfile: yocto-build-env: update balenaCLI to 14.5.15 [Alex Gonzalez]

# v1.19.24
## (2023-02-28)

* balena-api: ignore quotes from API replies [Alex Gonzalez]

# v1.19.23
## (2023-01-28)

* balena-generate-ami: increase import snapshot timeout [Alex Gonzalez]
* balena-generate-ami: remove s3 temporary image if snapshot import times out [Alex Gonzalez]
* balena-generate-ami: match instance type with image type [Alex Gonzalez]
* balena-generate-ami: fix linter warnings [Alex Gonzalez]

# v1.19.22
## (2023-01-25)

* balena-generate-ami: allow for staging deployments [Alex Gonzalez]
* jenkins_generate_ami: allow for staging deployment [Alex Gonzalez]

# v1.19.21
## (2023-01-19)

* balene-generate-ami: remove key name [Alex Gonzalez]

# v1.19.20
## (2023-01-18)

* jenkins_generate_ami: default to pull cloud-config apps from balena_os [Alex Gonzalez]

# v1.19.19
## (2023-01-14)

* balena-generate-ami: do not remove AMI snapshot [Alex Gonzalez]
* jenkins_generate_ami: use balena_os tokens instead of org specific token [Alex Gonzalez]
* jenkins_build: respect the preserve build flag [Alex Gonzalez]
* balena-generate-ami: cleanup images after deployment [Alex Gonzalez]
* balena-generate-ami: test image before making it public [Alex Gonzalez]

# v1.19.18
## (2023-01-09)

* balena-generate-ami: Enable TPM support on x86_64 only [Michal Toman]

# v1.19.17
## (2022-12-23)

* jenkins_generate_ami: support using both live and installer images as AMIs [Alex Gonzalez]
* balena-generate-ami: Enable nitroTPM support [Alex Gonzalez]
* jenkins_build: add argument to build OS development images [Alex Gonzalez]

# v1.19.16
## (2022-12-16)

* dockerfile: balena-push-env: update balena CLI version to v14.5.15 [Alex Gonzalez]
* jenkins_generate_ami: add balena org for preloaded app [Alex Gonzalez]
* jenkins_generate_ami: distinguish between staging and production [Alex Gonzalez]

# v1.19.15
## (2022-12-16)

* workflows: add flowzone [Alex Gonzalez]

# v1.19.14
## (2022-11-10)

* jenkins_generate_ami: use a different token [Alex Gonzalez]

# v1.19.13
## (2022-10-21)

* jenkins_build: Only deploy AMI after deploying a final release [Alex Gonzalez]

# v1.19.12
## (2022-08-08)

* barys: Add balena-rust to syntax conversion step [Alex Gonzalez]

# v1.19.11
## (2022-07-25)

* balena-api: On hostapp creation, set class to app [Alex Gonzalez]

# v1.19.10
## (2022-06-29)

* balena-deploy: Use balena-img instead of resin-img [Alex Gonzalez]
* Global rename from dockerhub resin to balena accounts [Alex Gonzalez]
* automation: Stop deploying images to dockerhub [Alex Gonzalez]

# v1.19.9
## (2022-06-28)

* balena-deploy: pin balena-img to v4.1.2 [Joseph Kogut]
* balena-deploy: s/resin-img/balena-img [Joseph Kogut]

# v1.19.8
## (2022-06-01)

* balena-lib: release_finalize: Do not retag phase for ESR branch patch [Alex Gonzalez]

# v1.19.7
## (2022-05-31)

* balena-lib: balena_lib_release_finalize: Pass the correct arguments [Alex Gonzalez]
* balena-lib: Tag ESR fleets with patch independent tags [Alex Gonzalez]

# v1.19.6
## (2022-05-24)

* balena-lib: Check versions before finalizing [Alex Gonzalez]
* balena-deploy-block: Do not always finalise on deploy [Alex Gonzalez]
* balena-deploy-block: Add OS version to contract [Alex Gonzalez]
* balena-deploy: Generate OS contract if not available [Alex Gonzalez]
* balena-lib: Build contracts [Alex Gonzalez]
* Add generate-oscontract script [Alex Gonzalez]

# v1.19.5
## (2022-05-19)

* jenkins_build: Finalize when required [Alex Gonzalez]
* balena-lib: Finalise release before tagging [Alex Gonzalez]
* balena-api: Add function to get final state of release [Alex Gonzalez]
* balena-lib: Extract release finalization as function [Alex Gonzalez]
* Update balena-cli version to latest [Alex Gonzalez]
* balena-deploy: Fix header on balena_deploy_block() [Alex Gonzalez]

# v1.19.4
## (2022-04-28)

* balena-api.inc: fix 'fatal: unsafe repository' [Florin Sarbu]

# v1.19.3
## (2022-04-26)

* balena-lib: fix 445d6d1fcfce97f85ffcfedc0083eb658a734321 [Florin Sarbu]

# v1.19.2
## (2022-04-21)

* balena-lib: fix 'fatal: unsafe repository' [Joseph Kogut]

# v1.19.1
## (2022-04-14)

* deploy: ensure deployRawArtifact is empty instead of null [Joseph Kogut]

# v1.19.0
## (2022-04-13)

* deploy: push image variant artifacts [Joseph Kogut]

# v1.18.0
## (2022-03-31)

* Bump balena-cli to v.Latest [ab77]

# v1.17.12
## (2022-03-29)

* Remove superfluous preload flag [ab77]

# v1.17.11
## (2022-03-29)

* Unattended preload operation [ab77]

# v1.17.10
## (2022-03-28)

* Pass environment to docker [ab77]

# v1.17.9
## (2022-03-25)

* automation: ami: make BALENA_PRELOAD_COMMIT optional [Joseph Kogut]

# v1.17.8
## (2022-03-15)

* balena-deploy: s/resin-flasher/balena-flasher [Joseph Kogut]

# v1.17.7
## (2022-03-15)

* jenkins_generate_ami: surface preload app commit as variable [Joseph Kogut]

# v1.17.6
## (2022-03-08)

* barys: Remove RESINHUP setting [Alex Gonzalez]

# v1.17.5
## (2022-03-08)

* balena-deploy: Avoid patching test suites config.js during deploy [Kyle Harding]

# v1.17.4
## (2022-03-03)

* Init and update submodules when switching meta-balena branches [Kyle Harding]

# v1.17.3
## (2022-03-02)

* jenkins_build: Use recurse-submodules when checking out meta-balena [Kyle Harding]

# v1.17.2
## (2022-02-25)

* prepare-and-start: Remove balena login [Alex Gonzalez]

# v1.17.1
## (2022-01-27)

* balena-deploy.inc: Do no deploy device logo to deprecated endpoint [Florin Sarbu]

# v1.17.0
## (2022-01-20)

* balena-lib: Fix fetching meta-balena base version [Alex Gonzalez]
* jenkins_build-block: Use true/false for ESR variable [Alex Gonzalez]
* balena-deploy-block: Label ESR hostapps [Alex Gonzalez]
* balena-api: add balena_api_fetch_fleet_tag [Alex Gonzalez]
* balena-api: Set policy on ESR hostapps [Alex Gonzalez]
* balena-deploy: Pass ESR variable when creating apps [Alex Gonzalez]

# v1.16.4
## (2022-01-18)

* balena-deploy: Deploy passing the latest meta-balena version and not tag [Alex Gonzalez]
* balena-lib: Add balena_lib_get_meta_balena_base_version [Alex Gonzalez]

# v1.16.3
## (2022-01-17)

* balena-deploy-block: Check for existing tag only in specific hostapp [Alex Gonzalez]

# v1.16.2
## (2022-01-15)

* balena-api: Propagate balena API environment, token and OS organization [Alex Gonzalez]
* balena-build.sh: Propagate balena API environment and token [Alex Gonzalez]
* prepare-and-start: Propagate balena API environment and token [Alex Gonzalez]

# v1.16.1
## (2022-01-11)

* revert_overrides: Add intel-quark to architecture overrides [Alex Gonzalez]

# v1.16.0
## (2021-12-30)

* balena-deploy: Check for file existence before deploying [Alex Gonzalez]
* balena-deploy-block: Check existence of tag before re-deploying [Alex Gonzalez]
* balena-api: Add function to check the existence of a release tag [Alex Gonzalez]
* balena-deploy-block: Finalize releases when deployed [Alex Gonzalez]
* Accept deployments without balena.yml [Alex Gonzalez]
* jenkins_generate_ami: Remove variant from image name [Alex Gonzalez]
* balena-build.sh: Stop building OS variants [Alex Gonzalez]
* jenkins_build.sh: Remove buildFlavor [Alex Gonzalez]
* jenkins_build-blocks: Remove variant build option [Alex Gonzalez]
* balena-deploy: Stop using .dev/.prod variant suffixes [Alex Gonzalez]
* balena-deploy-block: Stop tagging hostapp releases with variant [Alex Gonzalez]
* balena-lib: Use externalVersion to match contracts [Alex Gonzalez]
* jenkins_build: Deploy hostapp like any other block [Alex Gonzalez]
* jenkins_build-blocks: Separate block build release deployment [Alex Gonzalez]
* balena-deploy-block: Use release versioning [Alex Gonzalez]
* jenkins_build: Remove discontinued check [Alex Gonzalez]
* balena-deploy: Do not deploy discontinued device types [Alex Gonzalez]
* balena-deploy: Discontinued device types use meta-balena version [Alex Gonzalez]
* balena-deploy: Adapt balena_deploy_block to release versioning and use it [Alex Gonzalez]
* balena-build-block: Remove image release [Alex Gonzalez]
* balena-api: Use release revision for fetchers [Alex Gonzalez]
* jenkins_build-block: Remove release version API setter [Alex Gonzalez]
* balena-api: Remove release version API setter [Alex Gonzalez]
* balena-lib: Use release versioning [Alex Gonzalez]

# v1.15.10
## (2021-12-02)

* balena-deploy: Set leviathan networkWireless mode based on device slug [Kyle Harding]

# v1.15.9
## (2021-11-26)

* Substitute the worker types for generic device slugs [Kyle Harding]

# v1.15.8
## (2021-11-03)

* Dockerfile_yocto-build-env: Install Honister host deps [Alexandru Costache]

# v1.15.7
## (2021-10-25)

* jenkins_build.sh: Fix deployment for discontinued device types [Alex Gonzalez]
* jenkins_build.sh: Remove PRIVATE_DT as it is unused [Alex Gonzalez]
* jenkins_build.sh: Fix lint warnings [Alex Gonzalez]

# v1.15.6
## (2021-10-21)

* balena-generate-ami.sh: wait for boot partition when preloading AMI [Michal Toman]

# v1.15.5
## (2021-10-21)

* jenkins_generate_ami.sh: Use a shared directory for preloaded image [Michal Toman]

# v1.15.4
## (2021-10-20)

* barys: update development image variables [Mark Corbin]

# v1.15.3
## (2021-10-20)

* jenkins_generate_ami.sh: Preload outside of yocto cache [Michal Toman]

# v1.15.2
## (2021-10-01)

* balena-generate-ami.sh: correctly mount boot partition when injecting SSH key [Michal Toman]

# v1.15.1
## (2021-10-01)

* Update balena-cli to 12.50.1 [Michal Toman]

# v1.15.0
## (2021-10-01)

* jenkins_generate_ami.sh: Use lib function to get arch from config.json [Michal Toman]
* balena-generate-ami.sh: Look for boot partition by label rather than hardcoding p1 [Michal Toman]
* balena-generate-ami.sh: Fail if AMI already exists [Michal Toman]
* balena-generate-ami.sh: sync after writing config.json [Michal Toman]
* balena-generate-ami.sh: Stick to POSIX-compliant [ instead of [[ [Michal Toman]
* balena-generate-ami.sh: Remove useless statements [Michal Toman]
* jenkins_generate_ami.sh: Use architecture as suffix instead of machine name [Michal Toman]
* jenkins_build.sh: pass MACHINE to jenkins_generate_ami.sh [Michal Toman]
* AMI automation: Adjust AMI names to be compatible with AWS API [ab77]
* AMI automation: Correct S3 bucket name and key [ab77]
* AMI automation: Add a separate container for generaing AMI [Michal Toman]
* AMI automation: shellcheck and resolve violations [ab77]
* AMI automation: Use staging env by default [Tomás Tormo]
* AMI automation: Simplify public ssh addition. Do not use sudo [Tomás Tormo]
* automation: Generate and publish AMI from the raw balenaOS image [Tomás Tormo]

# v1.14.9
## (2021-08-20)

* balena-deploy: When deploying hostapp default to using slug as name [Alex Gonzalez]
* balena-api: Do not use balena_lib_resolve_aliases [Alex Gonzalez]
* balena_lib: Make resolve_aliases local so it is not globally used [Alex Gonzalez]

# v1.14.8
## (2021-07-22)

* Use slug when setting deviceType for leviathan [Kyle Harding]

# v1.14.7
## (2021-06-29)

* balena-lib: Fix print statements helper functions [Kyle Harding]
* balena-lib: Fix device dir when running in Jenkins containers [Kyle Harding]

# v1.14.6
## (2021-06-18)

* balena-deploy: Flag hostapps as bootable apps [Alex Gonzalez]
* balena-deploy: Provide working directory when deploying hostapp [Alex Gonzalez]

# v1.14.5
## (2021-06-18)

* balena-deploy-block: Do not add variant suffix to release tag [Alex Gonzalez]

# v1.14.4
## (2021-06-16)

* Dockerfile_balena-push-env: Add balena-lib to image [Alex Gonzalez]
* balena-deploy-block: source balena-lib script library [Alex Gonzalez]

# v1.14.3
## (2021-06-01)

* balena-api: Filter out debug output [Alex Gonzalez]
* balena-api: Specify API environment and token when setting app roles [Alex Gonzalez]
* jenkins_build-blocks: Separate recipes and packages [Alex Gonzalez]
* balena-lib: Generalize contract fetcher [Alex Gonzalez]
* balena-deploy: Shorten installation directory '/yocto/resin-board' to '/work' [Alex Gonzalez]
* Conditional verbosity mode [Alex Gonzalez]

# v1.14.2
## (2021-05-26)

* balena-lib: Add function to fetch labels from image [Alex Gonzalez]
* balena-lib: contracts: Add package list fetcher [Alex Gonzalez]
* semver: Add bash utility for semantic version comparison [Alex Gonzalez]
* balena-docker: Add image retrieval function [Alex Gonzalez]

# v1.14.1
## (2021-05-24)

* Add a parsable representation of the changelog [Alex Gonzalez]

# v1.14.0
## (2021-05-20)

* README: Add brief introduction to the main scripts [Alex Gonzalez]
* balena-deploy: Add functions to deploy block, feed and OS release [Alex Gonzalez]
* Add script to build hostOS blocks [Alex Gonzalez]
* Balena build and deploy a hostOS yocto ipk block image [Alex Gonzalez]
* Add yocto-block-build-env container to build Yocto based hostOS blocks [Alex Gonzalez]

# v1.13.0
## (2021-05-19)

* jenkins_build: Rename metaResinBranch to metaBalenaBranch [Alex Gonzalez]
* jenkins_build: Replace supervisor tag with supervisor release [Alex Gonzalez]
* barys: Replace supervisor tag with supervisor release version [Alex Gonzalez]

# v1.12.16
## (2021-05-18)

* tests: Substitute deviceType with MACHINE when packaging tests [Kyle Harding]

# v1.12.15
## (2021-05-18)

* balena-docker: Allow to control iptables and ipmasq flags [Alex Gonzalez]
* Dockerfile_yocto-build-env: Specify docker version [Alex Gonzalez]

# v1.12.14
## (2021-05-17)

* balena-api: Allow access to OS developers to public apps [Alex Gonzalez]
* balena-api: Set default argument value not to exist on nounset setting [Alex Gonzalez]

# v1.12.13
## (2021-05-14)

* balena-deploy: Fix device installation path when running in helper container [Alex Gonzalez]
* balena-lib: Fix device installation path when running in helper container [Alex Gonzalez]
* balena-deploy-block: Create public app if required [Alex Gonzalez]
* balena-api: Add missing argument to function comments [Alex Gonzalez]
* balena-api: Add block images getter functions [Alex Gonzalez]
* balena-api: Add functions for apps management [Alex Gonzalez]

# v1.12.12
## (2021-05-12)

* Shorten installation directory '/yocto/resin-board' to '/work' [Alex Gonzalez]
* yocto-build-env: Update Dockerfile to add host tools dependencies [Alex Gonzalez]
* balena-build: Add option to keep local containers [Alex Gonzalez]
* balena-build: Re-enable the container's output [Alex Gonzalez]
* Generalize balena-docker to any engine [Alex Gonzalez]
* balena-docker: Adapt to be used from POSIX shell [Alex Gonzalez]

# v1.12.11
## (2021-05-10)

* Substitute device type in config.js if present [Kyle Harding]

# v1.12.10
## (2021-04-28)

* balena-build: Correctly pass development images flag and amend usage [Alex Gonzalez]
* balena-build: print submodule status [Alex Gonzalez]

# v1.12.9
## (2021-04-21)

* balena-build: Cleanup build containers and enable build output [Alex Gonzalez]
* balena-build: Fix indentation [Alex Gonzalez]
* balena-build: Do not exit if no SSH_AUTH_SOCK defined [Alex Gonzalez]
* balena-lib: Add function to resolve between contract slugs and Yocto machines [Alex Gonzalez]
* balena-build: Pass the API environment to the build container [Alex Gonzalez]

# v1.12.8
## (2021-04-15)

* balena-lib: Do not err when sourcing without a repository [Alex Gonzalez]
* jenkins_build-containers: Use a fixed length for the git short revision [Alex Gonzalez]
* balena-build: Fix development image build [Alex Gonzalez]

# v1.12.7
## (2021-04-12)

* balena-deploy: Set the OS version before setting deploy directory [Alex Gonzalez]
* balena-docker: Make it less verbose [Alex Gonzalez]
* balena-api: Improve logs when setting version [Alex Gonzalez]

# v1.12.6
## (2021-03-30)

* balena-lib: Set default namespace if not defined [Alex Gonzalez]
* balena-build.sh: Move into build script [Alex Gonzalez]
* include: Move include files and entry scripts into its own folder [Alex Gonzalez]

# v1.12.5
## (2021-03-30)

* balena-lib: Pass API environment to balena_lib_token [Alex Gonzalez]
* balena-build: Pass an API environment to balena_lib_token [Alex Gonzalez]
* balena-deploy.inc: Pass API environment to balena_lib_token [Alex Gonzalez]
* balena-deploy: Adjust balena_deploy_hostapp to new balena_deploy_block entrypoint arguments [Alex Gonzalez]
* balena-deploy-block: Fix shellcheck warnings [Alex Gonzalez]
* balena-deploy-block: Adjust variables for common use [Alex Gonzalez]
* balena-deploy: Shellcheck warnings [Alex Gonzalez]

# v1.12.4
## (2021-03-29)

* jenkins_build: Call out to script libraries functions [Alex Gonzalez]
* balena-deploy: Fix indentation and shellcheck warnings [Alex Gonzalez]
* balena_deploy: Add functions to deploy Jenkins artifacts to S3 and dockerhub [Alex Gonzalez]
* balena-lib: By default only login to BaleneCloud if not token is found [Alex Gonzalez]
* balena-lib: Add several function to extract device details from device type JSON file [Alex Gonzalez]
* balena-api: Add is_dt_private function [Alex Gonzalez]

# v1.12.3
## (2021-03-26)

* balena-lib: Fix indentation to tabs [Alex Gonzalez]

# v1.12.2
## (2021-03-26)

* balena-docker: Remove execution trace flag [Alex Gonzalez]

# v1.12.1
## (2021-03-25)

* jenkins_build: Use balena_deploy_hostapp from balena-deploy [Alex Gonzalez]
* balena-deploy: Add script library for deploy logic [Alex Gonzalez]
* jenkins_build: Separate barys build functions [Alex Gonzalez]
* balena-build: Split build related functions [Alex Gonzalez]
* Dockerfile_balena-push-env: Refactor to use balena-deploy-block [Alex Gonzalez]
* balena-push-os-version: Rename to balena-deploy-block and set the release version on deploy [Alex Gonzalez]
* balena-api: Add script library with API calls [Alex Gonzalez]
* jenkins_build: Separate deploy functions [Alex Gonzalez]
* Add bitbake-args argument to barys and make bitbake-target accept multiple arguments [Alex Gonzalez]
* jenkins_build-containers: Allow docker login for local development [Alex Gonzalez]
* balena-lib: Add commonly used utility functions [Alex Gonzalez]

# v1.12.0
## (2021-03-24)

* Improve template layer matching [Kyle Harding]

# v1.11.2
## (2021-03-22)

* jenkins_build: Use balena-lib.inc instead of balena-inc.sh [Alex Gonzalez]
* balena-lib: Rename functions with the balena_lib prefix [Alex Gonzalez]
* balena-lib: Rename to balena-lib.inc [Alex Gonzalez]
* Allow to specify which containers to build and login to dockerhub so that they can be deployed [Alex Gonzalez]

# v1.11.1
## (2021-03-22)

* Dockerfile_balena-push-env: Refactor to use balena-docker [Alex Gonzalez]
* Dockerfile_yocto_build-env: Refactor to update dockerd and use balena-docker [Alex Gonzalez]
* prepare-and-start: Refactor to use balena-lib [Alex Gonzalez]
* balena-push-os-version: Refactor to use balena-docker [Alex Gonzalez]
* balena-docker: Rename manage-docker to balena-docker [Alex Gonzalez]

# v1.11.0
## (2021-03-01)

* Rename resin image types to balena [Kyle Harding]

# v1.10.3
## (2021-03-01)

* tests: fix typo in tests packaging [Kyle Harding]

# v1.10.2
## (2021-02-26)

* tests: strip leading paths when packaging [Kyle Harding]

# v1.10.1
## (2021-02-26)

* Dockerfile_yocto-build-env: Install required python3-distutils module [Florin Sarbu]

# v1.10.0
## (2021-02-25)

* Use version controlled helper containers [Alex Gonzalez]
* jenkins_build-containers: Use revision of the repo where the scrip lives [Alex Gonzalez]
* balena-lib: Return the current repository revision [Alex Gonzalez]
* balena-lib: Fix balena devices dockerhub password [Alex Gonzalez]
* Dockerfile_balena-push-env: Install node from correct distro source [Alex Gonzalez]
* Dockerfile_yocto-build-env: Update Ubuntu version to bionic [Alex Gonzalez]
* yocto-build-env: Add balena-cli to container image [Alex Gonzalez]

# v1.9.6
## (2021-02-25)

* Helper containers are now referenced by tag instead of using latest, and will be built and deployed if required [Alex Gonzalez]
* balena-lib: Add scripts library [Alex Gonzalez]

# v1.9.5
## (2021-02-25)

* Update Ubuntu version on balena-push-env helper container image [Alex Gonzalez]
* jenkins_build_containers: Extract repository name into variable [Alex Gonzalez]
* jenkins_build: Parametrize the docker registry repository [Alex Gonzalez]
* jenkins-build: Allow the build container to authenticate with the registry [Alex Gonzalez]
* prepare-and-start: Login to Balena's registry if credentials are provided [Alex Gonzalez]
* jenkins-build: Correct build flavor usage [Alex Gonzalez]
* The jenkins_build script will now preserve the deploy folder too when the preserve build flag is set. [Alex Gonzalez]
* jenkins-build.sh: Generalized target image names [Alex Gonzalez]
* barys: Allow to pass multiple bitbake targets [Alex Gonzalez]
* Generalize balena-push-os-version container helper image to push any image type [Alex Gonzalez]

# v1.9.4
## (2021-02-23)

* jenkins: compress test suites inside jenkins artifacts [Kyle Harding]

# v1.9.3
## (2021-02-16)

* Revert "esr: Add branch creation automation script" [Alex Gonzalez]

# v1.9.2
## (2021-02-12)

* esr: Add branch creation automation script [Alex Gonzalez]

# v1.9.1
## (2021-02-04)

* jenkins: deploy test suite from meta-balena [Kyle Harding]

# v1.9.0
## (2020-11-06)

* Check DT privacy against the API [Stevche Radevski]

# v1.8.2
## (2020-10-22)

* build-device-type-json: show stderr on failure [Joseph Kogut]

# v1.8.1
## (2020-08-31)

* README: Remove resin occurrences in documentation [Alexandru Costache]

# v1.8.0
## (2020-06-22)

* Push images to S3 as the first step, and then create the docker and balena resources [Giovanni Garufi]

# v1.7.2
## (2020-05-20)

* Update balena-cli version to 11.35.4 [Giovanni Garufi]

# v1.7.1
## (2020-05-14)

* Fix s3 bucket reference [Giovanni Garufi]

# v1.7.0
## (2020-05-13)

* Manage deploying private device types [Stevche Radevski]

# v1.6.0
## (2020-05-06)

* Stop pushing images in the resinos folder [Giovanni Garufi]

# v1.5.6
## (2020-02-28)

* jenkins_build.sh: Fix passing additional argument to barys [Florin Sarbu]

# v1.5.5
## (2020-02-28)

* jenkins_build.sh: Allow for passing additional arguments to barys [Florin Sarbu]

# v1.5.4
## (2020-01-31)

* jenkins_build.sh: Set a content-type to the device type's logo.svg [Thodoris Greasidis]

# v1.5.3
## (2020-01-27)

* Rename balena push script for clarity [Giovanni Garufi]

# v1.5.2
## (2019-11-15)

* Update balenaos account to balena_os [Giovanni Garufi]

# v1.5.1
## (2019-11-14)

* Tag ESR releases with meta balena base version [Giovanni Garufi]

# v1.5.0
## (2019-11-13)

* Remove line information from release [Giovanni Garufi]
* Push ESR images to private esr bucket [Giovanni Garufi]

# v1.4.1
## (2019-11-12)

* Change ascii art to represent balenaOS [Roman Mazur]

# v1.4.0
## (2019-10-09)

* Fix docker push script [Giovanni Garufi]
* Add ESR-line parameter [Giovanni Garufi]

# v1.3.9
## (2019-10-04)

* Push OS image to balena and set version tags [Giovanni Garufi]

# v1.3.8
## (2019-09-30)

* barys: correctly apply SUPERVISOR_TAG variable in local.conf [Gergely Imreh]

# v1.3.7
## (2019-09-10)

* Support building older resin OS releases [Florin Sarbu]

# v1.3.6
## (2019-09-10)

* git: Ignore package-lock.json [Sven Schwermer]

# v1.3.5
## (2019-07-15)

* jenkins_build.sh: Use dsync instead of deprecated sync command [Florin Sarbu]

# v1.3.4
## (2019-07-15)

* jenkins_build.sh: Use put command with -f for latest file [Florin Sarbu]

# v1.3.3
## (2019-07-15)

* jenkins_build.sh: Use canned ACL and remove obsolete option [Florin Sarbu]

# v1.3.2
## (2019-07-15)

* jenkins_build.sh: Use s4cmd del command instead of rm [Florin Sarbu]

# v1.3.1
## (2019-07-12)

* jenkins_build.sh: Use new s4cmd params for accessing s3 [Florin Sarbu]

# v1.3.0
## (2019-07-12)

* jenkins_build.sh: Switch s3cmd with s4cmd [Florin Sarbu]

# v1.2.3
## (2019-06-24)

* jenkins_build.sh: Rename device type icon to logo.svg [Florin Sarbu]

# v1.2.2
## (2019-06-24)

* Deploy the device type logo so the UI can pick it up [Florin Sarbu]

# v1.2.1
## (2019-06-19)

* Do not error if the kernel headers are not generated [Florin Sarbu]

# v1.2.0
## (2019-05-30)

* Add balena-cli to yocto-build-env docker image [Giovanni Garufi]

# v1.1.1
## (2019-05-21)

* jenkins_build.sh: Use correct bash variable assignment [Florin Sarbu]

# v1.1.0
## (2019-05-20)

* Push and tag dev images to dockerhub [Giovanni Garufi]

# v1.0.6
## (2019-04-25)

* Store rootfs manifest [Giovanni Garufi]

# v1.0.5
## (2019-04-09)

* jenkins_build.sh: Replace meta-resin reference with meta-balena [Florin Sarbu]

# v1.0.4
## (2019-04-09)

* Parse by meta-balena- instead of by meta-resin- [Florin Sarbu]

# v1.0.3
## (2019-03-07)

* Also deploy kernel source tarball [Zubair Lutfullah Kakakhel]

# v1.0.2
## (2019-01-18)

* Add error check for the in-container bash code [Florin Sarbu]

# v1.0.1
## (2018-12-16)

* Switch from resin-yocto-scripts to balena-yocto-scripts [Florin Sarbu]

# v1.0.0
## (2018-12-14)

* Rename images from resin.img to balena.img [Alexis Svinartchouk]
* jenkins_build.sh: Use ts-node instead of coffeescript for img prepare [Alexis Svinartchouk]
* Attempt to fix unrecognized input header error [John (Jack) Brown]
