# Change Log

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

# v1.14.9
## (2021-08-20)

* balena-deploy: When deploying hostapp default to using slug as name [Alex Gonzalez]
* balena-api: Do not use balena_lib_resolve_aliases [Alex Gonzalez]
* balena_lib: Make resolve_aliases local so it is not globally used [Alex Gonzalez]

# v1.14.8
## (2021-07-22)

* Use slug when setting deviceType for leviathan [Kyle Harding]

# v1.14.7
## (2021-06-29)

* balena-lib: Fix print statements helper functions [Kyle Harding]
* balena-lib: Fix device dir when running in Jenkins containers [Kyle Harding]

# v1.14.6
## (2021-06-18)

* balena-deploy: Flag hostapps as bootable apps [Alex Gonzalez]
* balena-deploy: Provide working directory when deploying hostapp [Alex Gonzalez]

# v1.14.5
## (2021-06-18)

* balena-deploy-block: Do not add variant suffix to release tag [Alex Gonzalez]

# v1.14.4
## (2021-06-16)

* Dockerfile_balena-push-env: Add balena-lib to image [Alex Gonzalez]
* balena-deploy-block: source balena-lib script library [Alex Gonzalez]

# v1.14.3
## (2021-06-01)

* balena-api: Filter out debug output [Alex Gonzalez]
* balena-api: Specify API environment and token when setting app roles [Alex Gonzalez]
* jenkins_build-blocks: Separate recipes and packages [Alex Gonzalez]
* balena-lib: Generalize contract fetcher [Alex Gonzalez]
* balena-deploy: Shorten installation directory '/yocto/resin-board' to '/work' [Alex Gonzalez]
* Conditional verbosity mode [Alex Gonzalez]

# v1.14.2
## (2021-05-26)

* balena-lib: Add function to fetch labels from image [Alex Gonzalez]
* balena-lib: contracts: Add package list fetcher [Alex Gonzalez]
* semver: Add bash utility for semantic version comparison [Alex Gonzalez]
* balena-docker: Add image retrieval function [Alex Gonzalez]

# v1.14.1
## (2021-05-24)

* Add a parsable representation of the changelog [Alex Gonzalez]

# v1.14.0
## (2021-05-20)

* README: Add brief introduction to the main scripts [Alex Gonzalez]
* balena-deploy: Add functions to deploy block, feed and OS release [Alex Gonzalez]
* Add script to build hostOS blocks [Alex Gonzalez]
* Balena build and deploy a hostOS yocto ipk block image [Alex Gonzalez]
* Add yocto-block-build-env container to build Yocto based hostOS blocks [Alex Gonzalez]

# v1.13.0
## (2021-05-19)

* jenkins_build: Rename metaResinBranch to metaBalenaBranch [Alex Gonzalez]
* jenkins_build: Replace supervisor tag with supervisor release [Alex Gonzalez]
* barys: Replace supervisor tag with supervisor release version [Alex Gonzalez]

# v1.12.16
## (2021-05-18)

* tests: Substitute deviceType with MACHINE when packaging tests [Kyle Harding]

# v1.12.15
## (2021-05-18)

* balena-docker: Allow to control iptables and ipmasq flags [Alex Gonzalez]
* Dockerfile_yocto-build-env: Specify docker version [Alex Gonzalez]

# v1.12.14
## (2021-05-17)

* balena-api: Allow access to OS developers to public apps [Alex Gonzalez]
* balena-api: Set default argument value not to exist on nounset setting [Alex Gonzalez]

# v1.12.13
## (2021-05-14)

* balena-deploy: Fix device installation path when running in helper container [Alex Gonzalez]
* balena-lib: Fix device installation path when running in helper container [Alex Gonzalez]
* balena-deploy-block: Create public app if required [Alex Gonzalez]
* balena-api: Add missing argument to function comments [Alex Gonzalez]
* balena-api: Add block images getter functions [Alex Gonzalez]
* balena-api: Add functions for apps management [Alex Gonzalez]

# v1.12.12
## (2021-05-12)

* Shorten installation directory '/yocto/resin-board' to '/work' [Alex Gonzalez]
* yocto-build-env: Update Dockerfile to add host tools dependencies [Alex Gonzalez]
* balena-build: Add option to keep local containers [Alex Gonzalez]
* balena-build: Re-enable the container's output [Alex Gonzalez]
* Generalize balena-docker to any engine [Alex Gonzalez]
* balena-docker: Adapt to be used from POSIX shell [Alex Gonzalez]

# v1.12.11
## (2021-05-10)

* Substitute device type in config.js if present [Kyle Harding]

# v1.12.10
## (2021-04-28)

* balena-build: Correctly pass development images flag and amend usage [Alex Gonzalez]
* balena-build: print submodule status [Alex Gonzalez]

# v1.12.9
## (2021-04-21)

* balena-build: Cleanup build containers and enable build output [Alex Gonzalez]
* balena-build: Fix indentation [Alex Gonzalez]
* balena-build: Do not exit if no SSH_AUTH_SOCK defined [Alex Gonzalez]
* balena-lib: Add function to resolve between contract slugs and Yocto machines [Alex Gonzalez]
* balena-build: Pass the API environment to the build container [Alex Gonzalez]

# v1.12.8
## (2021-04-15)

* balena-lib: Do not err when sourcing without a repository [Alex Gonzalez]
* jenkins_build-containers: Use a fixed length for the git short revision [Alex Gonzalez]
* balena-build: Fix development image build [Alex Gonzalez]

# v1.12.7
## (2021-04-12)

* balena-deploy: Set the OS version before setting deploy directory [Alex Gonzalez]
* balena-docker: Make it less verbose [Alex Gonzalez]
* balena-api: Improve logs when setting version [Alex Gonzalez]

# v1.12.6
## (2021-03-30)

* balena-lib: Set default namespace if not defined [Alex Gonzalez]
* balena-build.sh: Move into build script [Alex Gonzalez]
* include: Move include files and entry scripts into its own folder [Alex Gonzalez]

# v1.12.5
## (2021-03-30)

* balena-lib: Pass API environment to balena_lib_token [Alex Gonzalez]
* balena-build: Pass an API environment to balena_lib_token [Alex Gonzalez]
* balena-deploy.inc: Pass API environment to balena_lib_token [Alex Gonzalez]
* balena-deploy: Adjust balena_deploy_hostapp to new balena_deploy_block entrypoint arguments [Alex Gonzalez]
* balena-deploy-block: Fix shellcheck warnings [Alex Gonzalez]
* balena-deploy-block: Adjust variables for common use [Alex Gonzalez]
* balena-deploy: Shellcheck warnings [Alex Gonzalez]

# v1.12.4
## (2021-03-29)

* jenkins_build: Call out to script libraries functions [Alex Gonzalez]
* balena-deploy: Fix indentation and shellcheck warnings [Alex Gonzalez]
* balena_deploy: Add functions to deploy Jenkins artifacts to S3 and dockerhub [Alex Gonzalez]
* balena-lib: By default only login to BaleneCloud if not token is found [Alex Gonzalez]
* balena-lib: Add several function to extract device details from device type JSON file [Alex Gonzalez]
* balena-api: Add is_dt_private function [Alex Gonzalez]

# v1.12.3
## (2021-03-26)

* balena-lib: Fix indentation to tabs [Alex Gonzalez]

# v1.12.2
## (2021-03-26)

* balena-docker: Remove execution trace flag [Alex Gonzalez]

# v1.12.1
## (2021-03-25)

* jenkins_build: Use balena_deploy_hostapp from balena-deploy [Alex Gonzalez]
* balena-deploy: Add script library for deploy logic [Alex Gonzalez]
* jenkins_build: Separate barys build functions [Alex Gonzalez]
* balena-build: Split build related functions [Alex Gonzalez]
* Dockerfile_balena-push-env: Refactor to use balena-deploy-block [Alex Gonzalez]
* balena-push-os-version: Rename to balena-deploy-block and set the release version on deploy [Alex Gonzalez]
* balena-api: Add script library with API calls [Alex Gonzalez]
* jenkins_build: Separate deploy functions [Alex Gonzalez]
* Add bitbake-args argument to barys and make bitbake-target accept multiple arguments [Alex Gonzalez]
* jenkins_build-containers: Allow docker login for local development [Alex Gonzalez]
* balena-lib: Add commonly used utility functions [Alex Gonzalez]

# v1.12.0
## (2021-03-24)

* Improve template layer matching [Kyle Harding]

# v1.11.2
## (2021-03-22)

* jenkins_build: Use balena-lib.inc instead of balena-inc.sh [Alex Gonzalez]
* balena-lib: Rename functions with the balena_lib prefix [Alex Gonzalez]
* balena-lib: Rename to balena-lib.inc [Alex Gonzalez]
* Allow to specify which containers to build and login to dockerhub so that they can be deployed [Alex Gonzalez]

# v1.11.1
## (2021-03-22)

* Dockerfile_balena-push-env: Refactor to use balena-docker [Alex Gonzalez]
* Dockerfile_yocto_build-env: Refactor to update dockerd and use balena-docker [Alex Gonzalez]
* prepare-and-start: Refactor to use balena-lib [Alex Gonzalez]
* balena-push-os-version: Refactor to use balena-docker [Alex Gonzalez]
* balena-docker: Rename manage-docker to balena-docker [Alex Gonzalez]

# v1.11.0
## (2021-03-01)

* Rename resin image types to balena [Kyle Harding]

# v1.10.3
## (2021-03-01)

* tests: fix typo in tests packaging [Kyle Harding]

# v1.10.2
## (2021-02-26)

* tests: strip leading paths when packaging [Kyle Harding]

# v1.10.1
## (2021-02-26)

* Dockerfile_yocto-build-env: Install required python3-distutils module [Florin Sarbu]

# v1.10.0
## (2021-02-25)

* Use version controlled helper containers [Alex Gonzalez]
* jenkins_build-containers: Use revision of the repo where the scrip lives [Alex Gonzalez]
* balena-lib: Return the current repository revision [Alex Gonzalez]
* balena-lib: Fix balena devices dockerhub password [Alex Gonzalez]
* Dockerfile_balena-push-env: Install node from correct distro source [Alex Gonzalez]
* Dockerfile_yocto-build-env: Update Ubuntu version to bionic [Alex Gonzalez]
* yocto-build-env: Add balena-cli to container image [Alex Gonzalez]

# v1.9.6
## (2021-02-25)

* Helper containers are now referenced by tag instead of using latest, and will be built and deployed if required [Alex Gonzalez]
* balena-lib: Add scripts library [Alex Gonzalez]

# v1.9.5
## (2021-02-25)

* Update Ubuntu version on balena-push-env helper container image [Alex Gonzalez]
* jenkins_build_containers: Extract repository name into variable [Alex Gonzalez]
* jenkins_build: Parametrize the docker registry repository [Alex Gonzalez]
* jenkins-build: Allow the build container to authenticate with the registry [Alex Gonzalez]
* prepare-and-start: Login to Balena's registry if credentials are provided [Alex Gonzalez]
* jenkins-build: Correct build flavor usage [Alex Gonzalez]
* The jenkins_build script will now preserve the deploy folder too when the preserve build flag is set. [Alex Gonzalez]
* jenkins-build.sh: Generalized target image names [Alex Gonzalez]
* barys: Allow to pass multiple bitbake targets [Alex Gonzalez]
* Generalize balena-push-os-version container helper image to push any image type [Alex Gonzalez]

# v1.9.4
## (2021-02-23)

* jenkins: compress test suites inside jenkins artifacts [Kyle Harding]

# v1.9.3
## (2021-02-16)

* Revert "esr: Add branch creation automation script" [Alex Gonzalez]

# v1.9.2
## (2021-02-12)

* esr: Add branch creation automation script [Alex Gonzalez]

# v1.9.1
## (2021-02-04)

* jenkins: deploy test suite from meta-balena [Kyle Harding]

# v1.9.0
## (2020-11-06)

* Check DT privacy against the API [Stevche Radevski]

# v1.8.2
## (2020-10-22)

* build-device-type-json: show stderr on failure [Joseph Kogut]

# v1.8.1
## (2020-08-31)

* README: Remove resin occurrences in documentation [Alexandru Costache]

# v1.8.0
## (2020-06-22)

* Push images to S3 as the first step, and then create the docker and balena resources [Giovanni Garufi]

# v1.7.2
## (2020-05-20)

* Update balena-cli version to 11.35.4 [Giovanni Garufi]

# v1.7.1
## (2020-05-14)

* Fix s3 bucket reference [Giovanni Garufi]

# v1.7.0
## (2020-05-13)

* Manage deploying private device types [Stevche Radevski]

# v1.6.0
## (2020-05-06)

* Stop pushing images in the resinos folder [Giovanni Garufi]

# v1.5.6
## (2020-02-28)

* jenkins_build.sh: Fix passing additional argument to barys [Florin Sarbu]

# v1.5.5
## (2020-02-28)

* jenkins_build.sh: Allow for passing additional arguments to barys [Florin Sarbu]

# v1.5.4
## (2020-01-31)

* jenkins_build.sh: Set a content-type to the device type's logo.svg [Thodoris Greasidis]

# v1.5.3
## (2020-01-27)

* Rename balena push script for clarity [Giovanni Garufi]

# v1.5.2
## (2019-11-15)

* Update balenaos account to balena_os [Giovanni Garufi]

# v1.5.1
## (2019-11-14)

* Tag ESR releases with meta balena base version [Giovanni Garufi]

# v1.5.0
## (2019-11-13)

* Remove line information from release [Giovanni Garufi]
* Push ESR images to private esr bucket [Giovanni Garufi]

# v1.4.1
## (2019-11-12)

* Change ascii art to represent balenaOS [Roman Mazur]

# v1.4.0
## (2019-10-09)

* Fix docker push script [Giovanni Garufi]
* Add ESR-line parameter [Giovanni Garufi]

# v1.3.9
## (2019-10-04)

* Push OS image to balena and set version tags [Giovanni Garufi]

# v1.3.8
## (2019-09-30)

* barys: correctly apply SUPERVISOR_TAG variable in local.conf [Gergely Imreh]

# v1.3.7
## (2019-09-10)

* Support building older resin OS releases [Florin Sarbu]

# v1.3.6
## (2019-09-10)

* git: Ignore package-lock.json [Sven Schwermer]

# v1.3.5
## (2019-07-15)

* jenkins_build.sh: Use dsync instead of deprecated sync command [Florin Sarbu]

# v1.3.4
## (2019-07-15)

* jenkins_build.sh: Use put command with -f for latest file [Florin Sarbu]

# v1.3.3
## (2019-07-15)

* jenkins_build.sh: Use canned ACL and remove obsolete option [Florin Sarbu]

# v1.3.2
## (2019-07-15)

* jenkins_build.sh: Use s4cmd del command instead of rm [Florin Sarbu]

# v1.3.1
## (2019-07-12)

* jenkins_build.sh: Use new s4cmd params for accessing s3 [Florin Sarbu]

# v1.3.0
## (2019-07-12)

* jenkins_build.sh: Switch s3cmd with s4cmd [Florin Sarbu]

# v1.2.3
## (2019-06-24)

* jenkins_build.sh: Rename device type icon to logo.svg [Florin Sarbu]

# v1.2.2
## (2019-06-24)

* Deploy the device type logo so the UI can pick it up [Florin Sarbu]

# v1.2.1
## (2019-06-19)

* Do not error if the kernel headers are not generated [Florin Sarbu]

# v1.2.0
## (2019-05-30)

* Add balena-cli to yocto-build-env docker image [Giovanni Garufi]

# v1.1.1
## (2019-05-21)

* jenkins_build.sh: Use correct bash variable assignment [Florin Sarbu]

# v1.1.0
## (2019-05-20)

* Push and tag dev images to dockerhub [Giovanni Garufi]

# v1.0.6
## (2019-04-25)

* Store rootfs manifest [Giovanni Garufi]

# v1.0.5
## (2019-04-09)

* jenkins_build.sh: Replace meta-resin reference with meta-balena [Florin Sarbu]

# v1.0.4
## (2019-04-09)

* Parse by meta-balena- instead of by meta-resin- [Florin Sarbu]

# v1.0.3
## (2019-03-07)

* Also deploy kernel source tarball [Zubair Lutfullah Kakakhel]

# v1.0.2
## (2019-01-18)

* Add error check for the in-container bash code [Florin Sarbu]

# v1.0.1
## (2018-12-16)

* Switch from resin-yocto-scripts to balena-yocto-scripts [Florin Sarbu]

# v1.0.0
## (2018-12-14)

* Rename images from resin.img to balena.img [Alexis Svinartchouk]
* jenkins_build.sh: Use ts-node instead of coffeescript for img prepare [Alexis Svinartchouk]
* Attempt to fix unrecognized input header error [John (Jack) Brown]
